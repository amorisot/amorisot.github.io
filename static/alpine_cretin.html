<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ðŸ‡«ðŸ‡· Le Vrai Drapeau? ðŸ‡«ðŸ‡·</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Georgia', serif;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            color: white;
            padding: 20px;
        }

        h1 {
            font-size: clamp(1.5rem, 5vw, 2.5rem);
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
        }

        .subtitle {
            font-style: italic;
            margin-bottom: 30px;
            opacity: 0.8;
        }

        .flag-container {
            display: flex;
            width: min(450px, 90vw);
            height: min(300px, 60vw);
            box-shadow: 0 10px 40px rgba(0,0,0,0.5);
            border-radius: 4px;
            overflow: hidden;
            margin-bottom: 30px;
        }

        .stripe {
            flex: 1;
            transition: background-color 0.3s ease;
        }

        .buttons {
            display: flex;
            gap: 20px;
            margin-bottom: 30px;
        }

        button {
            font-family: 'Georgia', serif;
            font-size: clamp(1rem, 4vw, 1.5rem);
            padding: 12px 25px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s ease;
            font-weight: bold;
        }

        button:hover {
            transform: scale(1.05);
        }

        button:active {
            transform: scale(0.95);
        }

        .btn-vrai {
            background: linear-gradient(135deg, #27ae60, #2ecc71);
            color: white;
        }

        .btn-faux {
            background: linear-gradient(135deg, #c0392b, #e74c3c);
            color: white;
        }

        .result {
            font-size: 1.3rem;
            text-align: center;
            max-width: 600px;
            min-height: 100px;
            padding: 20px;
            border-radius: 10px;
            background: rgba(255,255,255,0.1);
            margin-bottom: 20px;
        }

        .result.correct {
            background: rgba(39, 174, 96, 0.3);
            border: 2px solid #27ae60;
        }

        .result.wrong {
            background: rgba(192, 57, 43, 0.3);
            border: 2px solid #c0392b;
        }

        .score {
            font-size: 1.2rem;
            margin-bottom: 20px;
        }

        .haddock-img {
            font-size: 4rem;
            margin-bottom: 10px;
        }

        .insult {
            font-style: italic;
            font-size: 1.5rem;
            color: #e74c3c;
        }

        .color-info {
            font-size: 0.9rem;
            opacity: 0.7;
            margin-top: 10px;
        }

        .hidden {
            display: none;
        }

        .next-btn {
            background: linear-gradient(135deg, #3498db, #2980b9);
            color: white;
            margin-top: 10px;
        }
    </style>
</head>
<body>
    <h1>ðŸ‡«ðŸ‡· Le Vrai Drapeau? ðŸ‡«ðŸ‡·</h1>
    <p class="subtitle">Est-ce les vraies couleurs officielles du drapeau franÃ§ais?</p>

    <div class="score">Score: <span id="correct">0</span> / <span id="total">0</span></div>

    <div class="flag-container">
        <div class="stripe" id="blue"></div>
        <div class="stripe" id="white"></div>
        <div class="stripe" id="red"></div>
    </div>

    <div class="buttons" id="guess-buttons">
        <button class="btn-vrai" onclick="guess(true)">âœ“ VRAI!</button>
        <button class="btn-faux" onclick="guess(false)">âœ— FAUX!</button>
    </div>

    <div class="result hidden" id="result"></div>

    <button class="next-btn hidden" id="next-btn" onclick="newRound()">Suivant â†’</button>

    <script>
        // Official French flag colors
        const OFFICIAL = {
            blue: '#000091',
            white: '#FFFFFF',
            red: '#E1000F'
        };

        // Captain Haddock's finest insults
        const HADDOCK_INSULTS = [
            "Mille milliards de mille sabords!",
            "Tonnerre de Brest!",
            "Bachi-bouzouk!",
            "Moule Ã  gaufres!",
            "Ectoplasme Ã  roulettes!",
            "Marin d'eau douce!",
            "Flibustier de carnaval!",
            "EspÃ¨ce de cornichon!",
            "Cataplasme! Saltimbanque!",
            "Zouave interplanÃ©taire!",
            "Bougre d'extrait de crÃ©tins des Alpes!",
            "OryctÃ©rope! AnalphabÃ¨te!",
            "Tchouk-tchouk-nougat!",
            "Scolopendre! Coloquinte!",
            "Anthropophage! ZapotÃ¨que!",
            "Boit-sans-soif! VÃ©gÃ©tarien!",
            "PhÃ©nomÃ¨ne de foire! Iconoclaste!",
            "MÃ©galomane! Troglodyte!",
            "Anacoluthe! Astronaute d'eau douce!",
            "Pyrophore! EmplÃ¢tre!",
            "Jocrisse! Bougre de faux jeton!",
            "EspÃ¨ce de BayadÃ¨re Ã  la graisse de cabestan!",
            "Papou des Carpathes!",
            "NÃ©grier! Pirate! Forban!",
            "Gyroscope! Logarithme!"
        ];

        let isReal = true;
        let currentColors = {};
        let correctCount = 0;
        let totalCount = 0;

        // Generate a slightly off color
        function perturbColor(hex) {
            // Parse hex
            let r = parseInt(hex.slice(1,3), 16);
            let g = parseInt(hex.slice(3,5), 16);
            let b = parseInt(hex.slice(5,7), 16);

            // Random perturbation between 15-50 for each channel
            const perturb = () => {
                const amount = Math.floor(Math.random() * 35) + 15;
                return Math.random() > 0.5 ? amount : -amount;
            };

            r = Math.max(0, Math.min(255, r + perturb()));
            g = Math.max(0, Math.min(255, g + perturb()));
            b = Math.max(0, Math.min(255, b + perturb()));

            return '#' + [r,g,b].map(x => x.toString(16).padStart(2,'0')).join('').toUpperCase();
        }

        function generateFakeFlag() {
            // Randomly decide which stripes to perturb (at least one)
            const perturbBlue = Math.random() > 0.3;
            const perturbWhite = Math.random() > 0.5;
            const perturbRed = Math.random() > 0.3;

            // Ensure at least one is perturbed
            if (!perturbBlue && !perturbWhite && !perturbRed) {
                const choice = Math.floor(Math.random() * 3);
                return {
                    blue: choice === 0 ? perturbColor(OFFICIAL.blue) : OFFICIAL.blue,
                    white: choice === 1 ? perturbColor(OFFICIAL.white) : OFFICIAL.white,
                    red: choice === 2 ? perturbColor(OFFICIAL.red) : OFFICIAL.red
                };
            }

            return {
                blue: perturbBlue ? perturbColor(OFFICIAL.blue) : OFFICIAL.blue,
                white: perturbWhite ? perturbColor(OFFICIAL.white) : OFFICIAL.white,
                red: perturbRed ? perturbColor(OFFICIAL.red) : OFFICIAL.red
            };
        }

        function setFlag(colors) {
            document.getElementById('blue').style.backgroundColor = colors.blue;
            document.getElementById('white').style.backgroundColor = colors.white;
            document.getElementById('red').style.backgroundColor = colors.red;
        }

        function getRandomInsult() {
            return HADDOCK_INSULTS[Math.floor(Math.random() * HADDOCK_INSULTS.length)];
        }

        function newRound() {
            // 50/50 chance of real or fake
            isReal = Math.random() > 0.5;

            if (isReal) {
                currentColors = { ...OFFICIAL };
            } else {
                currentColors = generateFakeFlag();
            }

            setFlag(currentColors);

            // Reset UI
            document.getElementById('result').classList.add('hidden');
            document.getElementById('result').classList.remove('correct', 'wrong');
            document.getElementById('next-btn').classList.add('hidden');
            document.getElementById('guess-buttons').classList.remove('hidden');
        }

        function guess(guessedReal) {
            totalCount++;
            const correct = guessedReal === isReal;

            const resultDiv = document.getElementById('result');
            resultDiv.classList.remove('hidden');
            document.getElementById('guess-buttons').classList.add('hidden');
            document.getElementById('next-btn').classList.remove('hidden');

            if (correct) {
                correctCount++;
                resultDiv.classList.add('correct');
                resultDiv.innerHTML = `
                    <div style="font-size: 3rem; margin-bottom: 10px;">ðŸŽ‰</div>
                    <strong>Bravo!</strong> C'Ã©tait bien ${isReal ? 'le VRAI drapeau!' : 'un FAUX drapeau!'}
                    <div class="color-info">
                        Bleu: ${currentColors.blue} ${currentColors.blue === OFFICIAL.blue ? 'âœ“' : 'âœ—'}<br>
                        Blanc: ${currentColors.white} ${currentColors.white === OFFICIAL.white ? 'âœ“' : 'âœ—'}<br>
                        Rouge: ${currentColors.red} ${currentColors.red === OFFICIAL.red ? 'âœ“' : 'âœ—'}
                    </div>
                `;
            } else {
                resultDiv.classList.add('wrong');
                resultDiv.innerHTML = `
                    <div class="haddock-img">ðŸ§”âš“</div>
                    <div class="insult">"${getRandomInsult()}"</div>
                    <div style="margin-top: 15px;">
                        C'Ã©tait ${isReal ? 'le VRAI drapeau!' : 'un FAUX drapeau!'}
                    </div>
                    <div class="color-info">
                        Bleu: ${currentColors.blue} ${currentColors.blue === OFFICIAL.blue ? 'âœ“' : '(officiel: ' + OFFICIAL.blue + ')'}<br>
                        Blanc: ${currentColors.white} ${currentColors.white === OFFICIAL.white ? 'âœ“' : '(officiel: ' + OFFICIAL.white + ')'}<br>
                        Rouge: ${currentColors.red} ${currentColors.red === OFFICIAL.red ? 'âœ“' : '(officiel: ' + OFFICIAL.red + ')'}
                    </div>
                `;
            }

            document.getElementById('correct').textContent = correctCount;
            document.getElementById('total').textContent = totalCount;
        }

        // Start the game
        newRound();
    </script>
</body>
</html>
